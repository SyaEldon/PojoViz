{"version":3,"file":"bundle.js","sources":["/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/node_modules/browserify/node_modules/browser-pack/_prelude.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/index.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/ObjectHashes.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/ObjectAnalyzer.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/analyzer/GenericAnalyzer.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/util/index.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/analyzer/Angular.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/analyzer/Window.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/analyzer/Object.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/util/HashMap.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/analyzer/BuiltIn.js","/Users/mauricio/Documents/web/maurizzzio.me/pojoviz/src/util/hashKey.js"],"names":["process","node","g","dagre","Digraph","library","container","analyzer","str","stringify","libraryNodes","nodes","libraryEdges","edges","_","forOwn","properties","k","label","match","width","length","height","forEach","v","Math","max","name","addNode","links","link","hasNode","from","to","addEdge","layout","nodeSep","run","center","x","y","mn","Infinity","mx","total","eachNode","layoutInfo","predecessors","successors","push","mnx","mny","mxx","mxy","min","render","data","oldContainer","utils","notification","global","oldRenderer","clean","renderer","setTimeout","preRender","console","log","Date","time","timeEnd","require","Q","window","ObjectHashes","longStackSupport","pojoviz","renderers","addRenderers","newRenderers","merge","nullifyContainer","getContainer","setContainer","containerName","options","src","createNew","init","setRenderer","r","getRenderer","ObjectAnalyzer","GenericAnalyzer","userVariables","document","addEventListener","e","detail","showSearch","property","module","exports","Generic","Angular","Window","PObject","BuiltIn","libraries","proto","all","fn","markDirty","setFunctionConstructors","newValue","_hasfc","Object","create","object","builtIn","angular","three","rendereachtime","eachObjectAndPrototype","obj","hasOwnProperty","prototype","wrapFn","wrapper","call","this","args","slice","arguments","apply","isObjectOrFunction","Analyzer","config","objects","HashMap","forbidden","__cacheObjects","__cacheLinks","levels","dirty","cache","functionConstructors","allFunctions","htmlNode","hashKey","forbiddenInStrictMode","constructor","isForbidden","get","isLinkable","key","getOwnPropertyNames","getProperties","linkableOnly","forbiddenKey","indexOf","me","hk","filter","good","map","type","linkeable","getPrototypeOf","hidden","findIndex","analyzeObjects","currentLevel","put","getOwnLinks","getAugmentedHash","has","createHashKeysFor","ref","fromHash","toHash","makeDirty","setLevels","l","setDirty","d","getObjects","stringifyObjectProperties","stringifyObjectLinks","aProto","add","remove","withPrototype","forbid","unforbid","displayname","functionconstructors","SHOW_FUNCTION_CONSTRUCTORS","allfunctions","inspected","parse","searchEngine","SHOW_BUILTIN","FORBIDDEN","fetch","then","inspect","split","inspectSelf","concat","empty","f","arr","tokens","markInspected","getValue","promisify","deferred","defer","script","createElement","onload","resolve","head","appendChild","promise","srcs","reduce","prev","current","nodeName","nodeProperty","open","template","lucky","libraryName","propertiesTransformation","[[Prototype]]","assert","message","translate","scale","s","transform","t","join","prefixer","unshift","transformProperty","escapeCls","replace","toQueryString","i","createEvent","eventName","details","CustomEvent","consoleToo","ev","dispatchEvent","createJsonpCallback","url","services","checked","getSelectedServices","toAnalyze","injector","toInspect","hashes","value","p","Function","Array","Boolean","Number","String","RegExp","JSON","Error","q","encodeURIComponent","hiddenKey","set","defineProperty","uid","err","localToString","toString","hasAClassName","getName","className","uniqueId"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","var _ = require('lodash'),\n  Q = require('q'),\n  dagre = (typeof window !== \"undefined\" ? window.dagre : typeof global !== \"undefined\" ? global.dagre : null),\n  utils = require('./util/'),\n  ObjectHashes = require('./ObjectHashes');\n\n// enable long stacks\nQ.longStackSupport = true;\n\nvar container,\n  oldContainer,\n  oldRenderer,\n  renderer,\n  pojoviz;      // namespace\n\nfunction process() {\n  var g = new dagre.Digraph(),\n      properties,\n      node,\n      library = container.analyzer,\n      str = library.stringify(),\n      libraryNodes = str.nodes,\n      libraryEdges = str.edges;\n\n  // create the graph\n  // each element of the graph has\n  // - label\n  // - width\n  // - height\n  // - properties\n  _.forOwn(libraryNodes, function (properties, k) {\n    var label = k.match(/\\S*?-(.*)/)[1];\n    // console.log(k, label.length);\n    node = {\n      label: k,\n      width: label.length * 10\n    };\n    // lines + header + padding bottom\n    node.height = properties.length * 15 + 50;\n    node.properties = properties;\n    properties.forEach(function (v) {\n      node.width = Math.max(node.width, v.name.length * 10);\n    });\n    g.addNode(k, node);\n  });\n\n  // build the edges from node to node\n  _.forOwn(libraryEdges, function (links) {\n    links.forEach(function (link) {\n      if (g.hasNode(link.from) && g.hasNode(link.to)) {\n        g.addEdge(null, link.from, link.to);\n      }\n    });\n  });\n\n  // layout of the graph\n  var layout = dagre.layout()\n    .nodeSep(30)\n    // .rankSep(70)\n    // .rankDir('TB')\n    .run(g);\n\n  var nodes = [],\n      edges = [],\n      center = {x: 0, y: 0},\n      mn = {x: Infinity, y: Infinity},\n      mx = {x: -Infinity, y: -Infinity},\n      total = g.nodes().length;\n\n  // update the node info of the node adding:\n  // - x\n  // - y\n  // - predecessors\n  // - successors\n  layout.eachNode(function (k, layoutInfo) {\n    var x = layoutInfo.x;\n    var y = layoutInfo.y;\n\n    node = g.node(k);\n    node.x = x;\n    node.y = y;\n    node.predecessors = g.predecessors(k);\n    node.successors = g.successors(k);\n    nodes.push(node);\n\n    // calculate the bbox of the graph to center the graph\n    var mnx = x - node.width / 2;\n    var mny = y - node.height / 2;\n    var mxx = x + node.width / 2;\n    var mxy = y + node.height / 2;\n\n    center.x += x;\n    center.y += y;\n    mn.x = Math.min(mn.x, mnx);\n    mn.y = Math.min(mn.y, mny);\n    // console.log(x, y, ' dim ', node.width, node.height);\n    mx.x = Math.max(mx.x, mxx);\n    mx.y = Math.max(mx.y, mxy);\n  });\n\n  center.x /= (total || 1);\n  center.y /= (total || 1);\n\n  // create the edges from property to node\n  _(libraryEdges).forOwn(function (links) {\n    links.forEach(function (link) {\n      if (g.hasNode(link.from) && g.hasNode(link.to)) {\n        edges.push(link);\n      }\n    });\n  });\n\n  return {\n    edges: edges,\n    nodes: nodes,\n    center: center,\n    mn: mn,\n    mx: mx\n  };\n}\n\n// render\nfunction render() {\n  var data;\n\n  if (container === oldContainer) {\n    return;\n  }\n\n  utils.notification('processing ' + container.global);\n\n  // pre render\n  oldRenderer && oldRenderer.clean();\n  renderer.clean();\n\n  setTimeout(function () {\n    container.preRender();\n    console.log('process & render start: ', new Date());\n    // data has\n    // - edges (property -> node)\n    // - nodes\n    // - center\n    //\n    console.time('process');\n    data = process();\n    console.timeEnd('process');\n\n    utils.notification('rendering ' + container.global);\n\n    console.time('render');\n    renderer.render(data);\n    console.timeEnd('render');\n\n    utils.notification('complete!');\n  }, 0);\n}\n\n// public api\npojoviz = {\n  renderers: {},\n  addRenderers: function (newRenderers) {\n    _.merge(pojoviz.renderers, newRenderers);\n  },\n  nullifyContainer: function () {\n    oldContainer = container;\n    container = null;\n  },\n  getContainer: function () {\n    return container;\n  },\n  setContainer: function (containerName, options) {\n    oldContainer = container;\n    container = ObjectHashes[containerName];\n\n    if (!container) {\n      container = ObjectHashes.createNew(containerName, options);\n    } else {\n      // required to fetch external resources\n      container.src = options.src;\n    }\n\n    return container.init();\n  },\n  setRenderer: function (r) {\n    oldRenderer = renderer;\n    renderer = pojoviz.renderers[r];\n  },\n  getRenderer: function () {\n    return renderer;\n  },\n  render: render,\n\n  // expose inner modules\n  ObjectHashes: require('./ObjectHashes'),\n  ObjectAnalyzer: require('./ObjectAnalyzer'),\n  analyzer: {\n    GenericAnalyzer: require('./analyzer/GenericAnalyzer')\n  },\n  utils: require('./util'),\n\n  // user vars\n  userVariables: []\n};\n\n// custom events\ndocument.addEventListener('property-click', function (e) {\n  var detail = e.detail;\n  pojoviz\n    .getContainer()\n    .showSearch(detail.name, detail.property);\n});\n\nmodule.exports = pojoviz;","'use strict';\n\nvar _ = require('lodash'),\n  Generic = require('./analyzer/GenericAnalyzer'),\n  Angular = require('./analyzer/Angular'),\n  Window = require('./analyzer/Window'),\n  PObject = require('./analyzer/Object'),\n  BuiltIn = require('./analyzer/BuiltIn');\n\nvar libraries;\n\nvar proto = {\n  createNew: function (global, options) {\n    console.log('creating a generic container for: ' + global, options);\n    return (libraries[global] = new Generic(options));\n  },\n  all: function (fn) {\n    _.forOwn(libraries, fn);\n  },\n  markDirty: function () {\n    proto.all(function (v) {\n      v.markDirty();\n    });\n    return proto;\n  },\n  setFunctionConstructors: function (newValue) {\n    proto.all(function (v) {\n      // this only works on the generic analyzers\n      if (!v._hasfc) {\n        v.analyzer.setFunctionConstructors(newValue);\n      }\n    });\n    return proto;\n  }\n};\n\nlibraries = Object.create(proto);\n_.merge(libraries, {\n  object: new PObject(),\n  builtIn: new BuiltIn(),\n  window: new Window(),\n  // popular\n  angular: new Angular(),\n  // mine\n  // t3: new Generic({ global: 't3' }),\n  // huge\n  three: new Generic({\n    global: 'THREE',\n    rendereachtime: true\n  }),\n});\n\n// console.log(libraries);\n\n// win max level initially is 0\n// libraries.win.preRender = function () {\n//   libraries.win.getObjects().empty();\n//   libraries.win.analyzeObjects([window], 0);\n// };\n\n// console.log(builtIn.getObjects());\n// console.log(win.getObjects());\n// console.log(user.getObjects());\n\nmodule.exports = libraries;","var HashMap = require('./util/HashMap'),\n  hashKey = require('./util/hashKey'),\n  _ = require('lodash');\n\n// utils\nfunction eachObjectAndPrototype(obj, fn) {\n  fn(obj);\n  if (obj.hasOwnProperty('prototype')) {\n    fn(obj.prototype);\n  }\n}\n\n/**\n * Wraps a function with another\n * @param  {Function} fn\n * @param  {Function}   wrapper\n * @return {*}\n */\nfunction wrapFn(fn, wrapper) {\n  return function () {\n    // NOTE: `this` will be the instance\n    wrapper.call(this);\n    var args = [].slice.call(arguments);\n    return fn.apply(this, args);\n  };\n}\n\nfunction isObjectOrFunction(v) {\n  return !!(v && (typeof v === 'object' ||\n    typeof v === 'function'));\n}\n\n/**\n * Properties forbidden in strict mode\n * @type {Array}\n */\nvar forbiddenInStrictMode = [\n  'callee', 'caller', 'arguments'\n];\n\n/**\n * @constructor\n * Object analyz\n * @param {[type]} config [description]\n */\nfunction Analyzer(config) {\n  if (!(this instanceof Analyzer)) {\n    return new Analyzer(config);\n  }\n  config = config || {};\n\n  /**\n   * Objects registered in this instance\n   * @type {HashMap}\n   */\n  this.objects = config.objects || new HashMap();\n  /**\n   * Forbidden objects\n   * @type {HashMap}\n   */\n  this.forbidden = config.forbidden || new HashMap();\n\n  /**\n   * Cache of properties\n   * @type {Object}\n   */\n  this.__cacheObjects = {};\n\n  /**\n   * Cache of links\n   * @type {Object}\n   */\n  this.__cacheLinks = {};\n\n  /**\n   * Dfs levels\n   * @type {number}\n   */\n  this.levels = Infinity;\n  /**\n   * If the analyzer is dirty then it has some pending work\n   * to do\n   * @type {boolean}\n   */\n  this.dirty = true;\n\n  /**\n   * True to save the properties of the objects analyzed in an\n   * internal cache\n   * @type {Boolean}\n   */\n  this.cache =\n    config.hasOwnProperty('cache') ?\n    config.cache : true;\n  /**\n   * True to include function constructors in the analysis graph\n   * i.e. the functions that have a prototype\n   * @type {boolean}\n   */\n  this.functionConstructors =\n    config.hasOwnProperty('functionConstructors') ?\n    config.functionConstructors : false;\n  /**\n   * True to include all the functions in the analysis graph\n   * @type {boolean}\n   */\n  this.allFunctions =\n    config.hasOwnProperty('allFunctions') ?\n    config.allFunctions : false;\n  /**\n   * True to allow HTML nodes\n   * @type {boolean}\n   */\n  this.htmlNode =\n    config.hasOwnProperty('htmlNode') ?\n    config.htmlNode : false;\n}\n\nAnalyzer.prototype = {\n  constructor: Analyzer,\n\n  /**\n   * Checks if an object is in the forbidden hash\n   * @param  {Object}  obj\n   * @return {boolean}\n   */\n  isForbidden: function (obj) {\n    return this.forbidden.get(obj);\n  },\n\n  isLinkable: function (key, obj) {\n    if (!obj) {\n      return false;\n    }\n\n    var v = typeof obj === 'object';\n\n    // if (v) {\n    //   if (!this.htmlNode && v instanceof Node) { return false; }\n    //   return true;\n    // }\n\n    // if (!this.htmlNode) {\n    //   v = v && !(v instanceof Node);\n    // }fdeq1`\n\n    // typeof obj === 'function' &&\n    //   console.log(Object.getOwnPropertyNames(obj));\n    if (!v && this.allFunctions) {\n      // minimize the nodes created by considering functions\n      // with more properties than the usual ones\n      v = typeof obj === 'function';\n      v = v && Object.getOwnPropertyNames(obj).length > 5;\n    }\n    if (!v && this.functionConstructors) {\n      v = typeof obj === 'function';\n      v = v && (\n        obj.name &&\n        obj.name[0].match(/^[A-Z]/) ||\n        key[0].match(/^[A-Z]/)\n      );\n    }\n    return v;\n  },\n\n  /**\n   * Gets the enumerable properties an object discarding\n   * forbidden ones\n   *\n   * @param  {Object} obj\n   * @return {Array} Array of objects, each object has the following\n   * properties:\n   *\n   * - name\n   * - cls\n   * - type\n   * - linkeable (if it's an object this property is set to true)\n   */\n  getProperties: function (obj, linkableOnly) {\n    var me = this,\n      hk = hashKey(obj),\n      properties;\n\n    if (!obj) {\n      throw 'this method needs an object to analyze';\n    }\n\n    if (this.cache) {\n      if (!linkableOnly && this.__cacheObjects[hk]) {\n        // console.log('objects from cache :)');\n        return this.__cacheObjects[hk];\n      }\n    }\n\n    properties = Object.getOwnPropertyNames(obj);\n\n    function forbiddenKey(v) {\n      // forbidden in strict mode\n      return ~forbiddenInStrictMode.indexOf(v) ||\n        v.match(/^__.*?__$/) ||\n        v.match(/^\\$\\$.*?\\$\\$$/) ||\n        v.match(/[:+~!><=//\\[\\]@ ]/);\n    }\n\n    properties = _.filter(properties, function (v) {\n      var good = typeof v === 'string' && !forbiddenKey(v),\n          r;\n      if (linkableOnly) {\n        try {\n          r = good && me.isLinkable(v, obj[v]);\n        } catch (e) {\n          r = false;\n          // uncomment to see why obj[v] is not allowed\n          // console.log(e);\n        } finally {\n          return r;\n        }\n      }\n      return good;\n    }).map(function (v) {\n      var type,\n        linkeable;\n      try {\n        // type = null|string|undefined|number|object\n        type = typeof obj[v];\n        linkeable = isObjectOrFunction(obj[v]);\n      } catch(e) {\n        type = 'undefined';\n        linkeable = false;\n      }\n\n      return {\n        // parent: hashKey(obj),\n        name: v,\n        type: type,\n        linkeable: linkeable\n      };\n    });\n\n    // special properties\n    var proto = Object.getPrototypeOf(obj);\n    if (proto) {\n      properties.push({\n        name: '[[Prototype]]',\n        // cls: hashKey(obj),\n        type: 'object',\n        linkeable: true,\n        hidden: true\n      });\n    }\n    var constructor = obj.hasOwnProperty &&\n      obj.hasOwnProperty('constructor') &&\n      typeof obj.constructor === 'function';\n    if (constructor &&\n        _.findIndex(properties, { name: 'constructor' }) === -1) {\n      properties.push({\n        // cls: hashKey(obj),\n        name: 'constructor',\n        type: 'function',\n        linkeable: true\n      });\n    }\n\n    if (this.cache && !linkableOnly) {\n      this.__cacheObjects[hk] = properties;\n    }\n\n    // console.log(properties);\n    return properties;\n  },\n\n  /**\n   * Analyzes a list of objects recursively\n   * @param  {Array} objects      Array of objects\n   * @param  {number} currentLevel Current dfs level\n   */\n  analyzeObjects: function (objects, currentLevel) {\n    var me = this;\n    objects.forEach(function (v) {\n      if (currentLevel <= me.levels &&    // dfs level\n          !me.objects.get(v) &&         // already registered\n          !me.isForbidden(v)              // forbidden check\n          ) {\n\n        // if (v.hasOwnProperty('__processed__')) {\n        //   debugger;\n        //   throw 'wtf';\n        // }\n        // Object.defineProperty(v, '__processed__', {\n        //   value: 'processsed'\n        // });\n\n        // add to the registered object pool\n        me.objects.put(v);\n\n        // dfs to the next level\n        me.analyzeObjects(\n          me.getOwnLinks(v).map(function (link) {\n            return link.to;\n          }),\n          currentLevel + 1\n        );\n      }\n    });\n  },\n\n  /**\n   * Returns a list of links, each link is an object which has the\n   * following properties:\n   *\n   * - from\n   * - to\n   * - property (string)\n   *\n   * @param  {Object} obj\n   * @return {Array}\n   */\n  getOwnLinks: function (obj) {\n    var me = this,\n        links = [],\n        properties,\n        name = hashKey(obj);\n\n    if (this.__cacheLinks[name]) {\n      // console.log('links from cache :)');\n      return this.__cacheLinks[name];\n    }\n\n    properties = me.getProperties(obj, true);\n\n    function getAugmentedHash(obj, name) {\n      if (!hashKey.has(obj) &&\n          name !== 'prototype' &&\n          name !== 'constructor') {\n        hashKey.createHashKeysFor(obj, name);\n      }\n      return hashKey(obj);\n    }\n\n    if (!name) {\n      throw 'the object needs to have a hashkey';\n    }\n\n    _.forEach(properties, function (v) {\n      var ref = obj[v.name];\n      // because of the levels a reference might not exist\n      if (!ref) {\n        return;\n      }\n\n      // if the object doesn't have a hashkey\n      // let's give it a name equal to the property\n      // being analyzed\n      getAugmentedHash(ref, v.name);\n\n      if (!me.isForbidden(ref)) {\n        links.push({\n          from: obj,\n          fromHash: hashKey(obj),\n          to: ref,\n          toHash: hashKey(ref),\n          property: v.name\n        });\n      }\n    });\n\n    var proto = Object.getPrototypeOf(obj);\n    if (proto && !me.isForbidden(proto)) {\n      links.push({\n        from: obj,\n        fromHash: hashKey(obj),\n        to: proto,\n        toHash: hashKey(proto),\n        property: '[[Prototype]]'\n      });\n    }\n\n    if (this.cache) {\n      this.__cacheLinks[name] = links;\n    }\n\n    return links;\n  },\n\n  makeDirty: function () {\n    this.dirty = true;\n  },\n\n  setLevels: function (l) {\n    this.levels = l;\n  },\n\n  setDirty: function (d) {\n    this.dirty = d;\n  },\n\n  setFunctionConstructors: function (v) {\n    this.functionConstructors = v;\n  },\n\n  getObjects: function () {\n    return this.objects;\n  },\n\n  /**\n   * Stringifies an object properties\n   * @param  obj\n   * @param  toString\n   * @return {Array}\n   */\n  stringifyObjectProperties: function (obj) {\n    return this.getProperties(obj);\n  },\n\n  /**\n   * Returns a representation of the links of\n   * an object\n   * @return {Array}\n   */\n  stringifyObjectLinks: function (obj) {\n    var me = this;\n    return me.getOwnLinks(obj).map(function (link) {\n      // discarded: from, to\n      return {\n        from: link.fromHash,\n        to: link.toHash,\n        property: link.property\n      };\n    });\n  },\n\n  /**\n   * Stringifies the objects saved in this analyzer\n   * @return {Object}\n   */\n  stringify: function () {\n    var me = this,\n      nodes = {},\n      edges = {};\n    console.time('stringify');\n    _(this.objects).forOwn(function (v) {\n      nodes[hashKey(v)] = me.stringifyObjectProperties(v);\n      edges[hashKey(v)] = me.stringifyObjectLinks(v);\n    });\n    console.timeEnd('stringify');\n    return {\n      nodes: nodes,\n      edges: edges\n    };\n  }\n};\n\n// aditional objects that need the prototype to exist\nvar aProto = Analyzer.prototype;\n_.merge(aProto, {\n\n  /**\n   * Adds a list of objects to analyze and make the analyzer dirty\n   * @param  {Array<Objects>} objects\n   * @return {this}\n   */\n  add: wrapFn(function (objects) {\n    console.time('analyze');\n    this.analyzeObjects(objects, 0);\n    console.timeEnd('analyze');\n    return this;\n  }, aProto.makeDirty),\n\n  /**\n   * Removes a list of objects, if `withPrototype` is true then\n   * also the prototype is removed\n   * @param  {Array<Objects>} objects\n   * @param  {boolean} withPrototype\n   * @return {this}\n   */\n  remove: wrapFn(function (objects, withPrototype) {\n    var me = this;\n    objects.forEach(function (obj) {\n      me.objects.remove(obj);\n      if (withPrototype && obj.hasOwnProperty('prototype')) {\n        me.objects.remove(obj.prototype);\n      }\n    });\n    return me;\n  }, aProto.makeDirty),\n\n  /**\n   * Forbids a list of objects, if `withPrototype` is true then\n   * also the prototype is forbidden\n   * @param  {Array<Objects>} objects\n   * @param  {boolean} withPrototype\n   * @return {this}\n   */\n  forbid: wrapFn(function (objects, withPrototype) {\n    var me = this;\n    me.remove(objects, withPrototype);\n    objects.forEach(function (obj) {\n      me.forbidden.put(obj);\n      if (withPrototype && obj.hasOwnProperty('prototype')) {\n        me.forbidden.put(obj.prototype);\n      }\n    });\n  }, aProto.makeDirty),\n\n  /**\n   * Unforbids a list of objects, if `withPrototype` is true then\n   * also the prototype is unforbidden\n   * @param  {Array<Objects>} objects\n   * @param  {boolean} withPrototype\n   * @return {this}\n   */\n  unforbid: wrapFn(function (objects, withPrototype) {\n    var me = this;\n    objects.forEach(function (obj) {\n      me.forbidden.remove(obj);\n      if (withPrototype && obj.hasOwnProperty('prototype')) {\n        me.forbidden.remove(obj.prototype);\n      }\n    });\n  }, aProto.makeDirty)\n});\n\nmodule.exports = Analyzer;\n","'use strict';\n\nvar Q = require('q'),\n  _ = require('lodash'),\n  utils = require('../util/'),\n  hashKey = require('../util/hashKey'),\n  analyzer = require('../ObjectAnalyzer');\n\nvar searchEngine = 'https://duckduckgo.com/?q=';\n\nfunction GenericAnalyzer(options) {\n  options = options || {};\n  // if (!name) {\n  //   throw 'name needs to be defined';\n  // }\n  this.global = options.global;\n  this.displayname = options.displayname;\n  this.levels = options.hasOwnProperty('levels') ? options.levels : 10;\n  this.forbidden = options.forbidden || [];\n  this.src = options.src;\n  this._hasfc = options.hasOwnProperty('functionconstructors');\n  this.functionconstructors = this._hasfc ?\n    options.functionconstructors : GenericAnalyzer.SHOW_FUNCTION_CONSTRUCTORS;\n  this.rendereachtime = options.hasOwnProperty('rendereachtime') ?\n    options.rendereachtime : false;\n  this.allfunctions = options.hasOwnProperty('allfunctions') ?\n    options.allfunctions : false;\n\n  this.inspected = false;\n\n  // parse forbid string to array\n  this.parse();\n\n  this.analyzer = analyzer({\n    functionConstructors: this.functionconstructors,\n    allFunctions: this.allfunctions\n  });\n}\n\nGenericAnalyzer.SHOW_BUILTIN = false;\nGenericAnalyzer.SHOW_FUNCTION_CONSTRUCTORS = true;\nGenericAnalyzer.FORBIDDEN = 'pojoviz:window,pojoviz:builtIn,document';\n\nGenericAnalyzer.prototype.init = function () {\n  var me = this;\n  console.log('%cPojoViz', 'font-size: 15px; color: ');\n  return me.fetch()\n    .then(function () {\n      if (me.rendereachtime || !me.inspected) {\n        me.inspect();\n      }\n      return me;\n    });\n};\n\nGenericAnalyzer.prototype.parse = function () {\n  if (typeof this.forbidden === 'string') {\n    this.forbidden = this.forbidden.split(',');\n  }\n  if (typeof this.functionconstructors === 'string') {\n    this.functionconstructors = this.functionconstructors === 'true';\n  }\n  if (typeof this.rendereachtime === 'string') {\n    this.rendereachtime = this.rendereachtime === 'true';\n  }\n  if (typeof this.allfunctions === 'string') {\n    this.allfunctions = this.allfunctions === 'true';\n  }\n};\n\nGenericAnalyzer.prototype.markDirty = function () {\n  this.inspected = false;\n};\n\nGenericAnalyzer.prototype.inspectSelf = function () {\n  console.log('analyzing window.' + this.global);\n  var me = this,\n    analyzer = this.analyzer,\n    forbidden = [].concat(this.forbidden);\n  // set a predefied global\n  hashKey.createHashKeysFor(window[this.global], this.global);\n  // clean\n  analyzer.getObjects().empty();\n  analyzer.forbidden.empty();\n  analyzer.setLevels(this.levels);\n\n  // settings > show links to built in objects\n  if (!GenericAnalyzer.SHOW_BUILTIN) {\n    forbidden = forbidden.concat(\n      GenericAnalyzer.FORBIDDEN.split(',')\n    );\n  }\n\n  forbidden.forEach(function(f) {\n    var arr,\n      tokens;\n    if (!f.indexOf('pojoviz:')) {\n      tokens = f.split(':');\n      arr = require('../ObjectHashes')[tokens[1]].getObjects();\n    } else {\n      arr = [window[f]];\n    }\n    console.log('forbidding: ', arr);\n    analyzer.forbid(arr, true);\n  });\n\n  analyzer.add([window[this.global]]);\n\n};\n\nGenericAnalyzer.prototype.markInspected = function () {\n  // mark this container as inspected\n  this.inspected = true;\n  return this;\n};\n\nGenericAnalyzer.prototype.inspect = function () {\n  this\n    .markInspected()\n    .inspectSelf();\n};\n\nGenericAnalyzer.prototype.preRender = function () {\n};\n\nGenericAnalyzer.prototype.fetch = function () {\n  var me = this,\n    script;\n\n  function getValue() {\n    return window[me.global];\n  }\n\n  function promisify(v) {\n    return function () {\n      utils.notification('fetching script ' + v, true);\n      var deferred = Q.defer();\n      script = document.createElement('script');\n      script.src = v;\n      script.onload = function () {\n        utils.notification('completed script ' + v, true);\n        deferred.resolve(getValue());\n      };\n      document.head.appendChild(script);\n      return deferred.promise;\n    };\n  }\n\n  if (this.src) {\n    if (getValue()) {\n      console.log('resource already fetched ' + this.src);\n    } else {\n      var srcs = this.src.split('|');\n      return srcs.reduce(function (prev, current) {\n        return prev.then(promisify(current));\n      }, Q('reduce'));\n    }\n  }\n\n  return Q(true);\n};\n\nGenericAnalyzer.prototype.showSearch = function (nodeName, nodeProperty) {\n  var me = this;\n  window.open(\n    _.template('${searchEngine}${lucky}${libraryName} ${nodeName} ${nodeProperty}', {\n      searchEngine: searchEngine,\n      lucky: GenericAnalyzer.lucky ? '!ducky' : '',\n      libraryName: me.displayname || me.global,\n      nodeName: nodeName,\n      nodeProperty: nodeProperty\n    })\n  );\n};\n\nmodule.exports = GenericAnalyzer;","'use strict';\n\nvar _ = require('lodash');\n\nvar propertiesTransformation = {\n  '[[Prototype]]': '__proto__'\n};\n\nvar utils = {\n  assert: function (v, message) {\n    if (!v) {\n      throw message || 'error';\n    }\n  },\n  translate: function (x, y) {\n    return 'translate(' + (x || 0) + ', ' + (y || 0) + ')';\n  },\n  scale: function (s) {\n    return 'scale(' + (s || 1) + ')';\n  },\n  transform: function (obj) {\n    var t = [];\n    _.forOwn(obj, function (v, k) {\n      t.push(utils[k].apply(utils, v));\n    });\n    return t.join(' ');\n  },\n  prefixer: function () {\n    var args = [].slice.call(arguments);\n    args.unshift('pv');\n    return args.join('-');\n  },\n  transformProperty: function (v) {\n    if (propertiesTransformation.hasOwnProperty(v)) {\n      return propertiesTransformation[v];\n    }\n    return v;\n  },\n  escapeCls: function(v) {\n    return v.replace(/\\$/g, '_');\n  },\n  toQueryString: function (obj) {\n    var s = '',\n        i = 0;\n    _.forOwn(obj, function (v, k) {\n      if (i) {\n        s += '&';\n      }\n      s += k + '=' + v;\n      i += 1;\n    });\n    return s;\n  },\n  createEvent: function (eventName, details) {\n    return new CustomEvent(eventName, {\n      detail: details\n    });\n  },\n  notification: function (message, consoleToo) {\n    var ev = utils.createEvent('pojoviz-notification', message);\n    consoleToo && console.log(message);\n    document.dispatchEvent(ev);\n  },\n  createJsonpCallback: function (url) {\n    var script = document.createElement('script');\n    script.src = url;\n    document.head.appendChild(script);\n  }\n};\n\nmodule.exports = utils;","'use strict';\n\nvar GenericAnalyzer = require('./GenericAnalyzer'),\n  hashKey = require('../util/hashKey');\n\nfunction Angular() {\n  GenericAnalyzer.call(this, {\n    global: 'angular',\n    displayname: 'AngularJS',\n    rendereachtime: true\n  });\n\n  this.services = [\n    '$animate',\n    '$cacheFactory',\n    '$compile',\n    '$controller',\n    // '$document',\n    '$exceptionHandler',\n    '$filter',\n    '$http',\n    '$httpBackend',\n    '$interpolate',\n    '$interval',\n    '$locale',\n    '$log',\n    '$parse',\n    '$q',\n    '$rootScope',\n    '$sce',\n    '$sceDelegate',\n    '$templateCache',\n    '$timeout',\n    // '$window'\n  ].map(function (v) {\n    return { checked: true, name: v };\n  });\n}\n\nAngular.prototype = Object.create(GenericAnalyzer.prototype);\n\nAngular.prototype.getSelectedServices = function () {\n  var me = this,\n    toAnalyze = [];\n\n  window.angular.module('app', ['ng']);\n  this.injector = window.angular.injector(['app']);\n\n  me.services.forEach(function (s) {\n    if (s.checked) {\n      var obj = me.injector.get(s.name);\n      hashKey.createHashKeysFor(obj, s.name);\n      toAnalyze.push(obj);\n    }\n  });\n  return toAnalyze;\n};\n\nAngular.prototype.inspectSelf = function () {\n  console.log('inspecting angular');\n  hashKey.createHashKeysFor(window.angular, 'angular');\n  this.analyzer.getObjects().empty();\n  this.analyzer.add(\n    [window.angular].concat(this.getSelectedServices())\n  );\n};\n\nmodule.exports = Angular;","'use strict';\n\nvar _ = require('lodash'),\n  hashKey = require('../util/hashKey'),\n  GenericAnalyzer = require('./GenericAnalyzer');\n\nvar toInspect = [window];\n\nfunction Window() {\n  GenericAnalyzer.call(this, {\n    levels: 1,\n    rendereachtime: true,\n    functionconstructors: false\n  });\n}\n\nWindow.prototype = Object.create(GenericAnalyzer.prototype);\n\nWindow.prototype.getObjects = function () {\n  return toInspect;\n};\n\nWindow.prototype.inspectSelf = function () {\n  console.log('inspecting window');\n  var me = this,\n    hashes = require('../ObjectHashes');\n\n  _.forOwn(hashes, function (v, k) {\n    if (v.global && window[v.global]) {\n      me.analyzer.forbid([window[v.global]], true);\n    }\n  });\n  this.analyzer.getObjects().empty();\n  this.analyzer.setLevels(this.levels);\n  this.analyzer.add(me.getObjects());\n};\n\nmodule.exports = Window;","'use strict';\n\nvar GenericAnalyzer = require('./GenericAnalyzer'),\n  utils = require('../util');\n\nfunction PObject() {\n  GenericAnalyzer.call(this);\n}\n\nPObject.prototype = Object.create(GenericAnalyzer.prototype);\n\nPObject.prototype.inspectSelf = function () {\n  console.log('inspecting Object objects');\n  this.analyzer.add(this.getObjects());\n};\n\nPObject.prototype.getObjects = function () {\n  return [Object];\n};\n\nmodule.exports = PObject;","'use strict';\n\nvar hashKey = require('./hashKey');\n\nfunction HashMap() {\n}\n\nHashMap.prototype = {\n  put: function (key, value) {\n    this[hashKey(key)] = (value || key);\n  },\n  get: function (key) {\n    return this[hashKey(key)];\n  },\n  remove: function (key) {\n    var v = this[hashKey(key)];\n    delete this[hashKey(key)];\n    return v;\n  },\n  empty: function () {\n    var p,\n        me = this;\n    for (p in me) {\n      if (me.hasOwnProperty(p)) {\n        delete this[p];\n      }\n    }\n  }\n};\n\nmodule.exports = HashMap;","'use strict';\n\nvar GenericAnalyzer = require('./GenericAnalyzer'),\n  utils = require('../util');\n\nvar toInspect = [\n  Object, Function,\n  Array, Date, Boolean, Number, Math, String, RegExp, JSON,\n  Error\n];\n\nfunction BuiltIn() {\n  GenericAnalyzer.call(this);\n}\n\nBuiltIn.prototype = Object.create(GenericAnalyzer.prototype);\n\nBuiltIn.prototype.inspectSelf = function () {\n  console.log('inspecting builtIn objects');\n  this.analyzer.add(this.getObjects());\n};\n\nBuiltIn.prototype.getObjects = function () {\n  return toInspect;\n};\n\nBuiltIn.prototype.showSearch = function (nodeName, nodeProperty) {\n  var url = 'https://developer.mozilla.org/en-US/search?' +\n    utils.toQueryString({\n      q: encodeURIComponent(nodeName + ' ' + nodeProperty),\n    });\n  window.open(url);\n};\n\nmodule.exports = BuiltIn;","'use strict';\n\nvar _ = require('lodash'),\n  assert = require('./').assert,\n  me, hashKey;\n\nfunction isObjectOrFunction(v) {\n  return v && (typeof v === 'object' || typeof v === 'function');\n}\n\n/**\n * Gets a store hashkey only if it's an object\n * @param  {[type]} obj\n * @return {[type]}\n */\nfunction get(obj) {\n  assert(isObjectOrFunction(obj), 'obj must be an object|function');\n  return obj.hasOwnProperty &&\n    obj.hasOwnProperty(me.hiddenKey) &&\n    obj[me.hiddenKey];\n}\n\n/**\n * Sets a key on an object\n * @param {[type]} obj [description]\n * @param {[type]} key [description]\n */\nfunction set(obj, key) {\n  assert(isObjectOrFunction(obj), 'obj must be an object|function');\n  assert(\n    key && typeof key === 'string',\n    'The key needs to be a valid string'\n  );\n  if (!get(obj)) {\n    Object.defineProperty(obj, me.hiddenKey, {\n      value: typeof obj + '-' + key\n    });\n  }\n  return me;\n}\n\nme = hashKey = function (v) {\n  var value = v,\n      uid = v;\n\n  if (isObjectOrFunction(v)) {\n    if (!get(v)) {\n      me.createHashKeysFor(v);\n    }\n    uid = get(v);\n    if (!uid) {\n      console.err('no hashkey :(', v);\n    }\n    assert(uid, 'error getting the key');\n    return uid;\n  }\n\n  // v is a primitive\n  return typeof v + '-' + uid;\n};\nme.hiddenKey = '__pojoVizKey__';\n\nme.createHashKeysFor = function (obj, name) {\n\n  function localToString(obj) {\n    var match;\n    try {\n      match = obj.toString().match(/^\\[object (\\S*?)\\]/);\n    } catch (e) {\n      match = false;\n    }\n    return match && match[1];\n  }\n\n  /**\n   * Analyze the internal property [[Class]] to guess the name\n   * of this object, e.g. [object Date], [object Math]\n   * Many object will give false positives (they will match [object Object])\n   * so let's consider Object as the name only if it's equal to\n   * Object.prototype\n   * @param  {Object}  obj\n   * @return {Boolean}\n   */\n  function hasAClassName(obj) {\n    var match = localToString(obj);\n    if (match === 'Object') {\n      return obj === Object.prototype && 'Object';\n    }\n    return match;\n  }\n\n  function getName(obj) {\n    var name, className;\n\n    // return the already generated hashKey\n    if (get(obj)) {\n      return get(obj);\n    }\n\n    // generate a new key based on\n    // - the name if it's a function\n    // - a unique id\n    name = typeof obj.name === 'string' &&\n      obj.name;\n\n    className = hasAClassName(obj);\n    if (!name && className) {\n      name = className;\n    }\n\n    name = name || _.uniqueId();\n    name = name.replace(/[\\. ]/img, '-');\n    return name;\n  }\n\n  // the name is equal to the passed name or the\n  // generated name\n  name = name || getName(obj);\n\n  // if the obj is a prototype then try to analyze\n  // the constructor first so that the prototype becomes\n  // [name].prototype\n  // special case: object.constructor = object\n  if (obj.hasOwnProperty &&\n      obj.hasOwnProperty('constructor') &&\n      typeof obj.constructor === 'function' &&\n      obj.constructor !== obj) {\n    return me.createHashKeysFor(obj.constructor);\n  }\n\n  // set name on self\n  set(obj, name);\n\n  // set name on the prototype\n  if (typeof obj === 'function' &&\n      obj.hasOwnProperty('prototype')) {\n    set(obj.prototype, name + '-prototype');\n  }\n};\n\nme.has = function (v) {\n  return v.hasOwnProperty &&\n    v.hasOwnProperty(me.hiddenKey);\n};\n\nmodule.exports = me;"]}