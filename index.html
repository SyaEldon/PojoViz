<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>POJO Viz</title>
	<script data-main="scripts/main.js" src="scripts/require.js"></script>
	<link rel="stylesheet" href="stylesheets/stylesheets/screen.css">

	<script src="bower_components/platform/platform.js"></script>

	<link rel="import" href="bower_components/core-scaffold/core-scaffold.html">
	<link rel="import" href="bower_components/core-toolbar/core-toolbar.html">
	<link rel="import" href="bower_components/core-menu/core-menu.html">
	<link rel="import" href="bower_components/core-menu/core-submenu.html">
	<link rel="import" href="bower_components/core-item/core-item.html">
	<link rel="import" href="bower_components/core-animated-pages/core-animated-pages.html">
	<link rel="import" href="bower_components/core-animated-pages/transitions/cross-fade.html">

	<link rel="import" href="elements/settings.html">
	<link rel="import" href="elements/about.html">
</head>
<body unresolved fullbleed>
	<core-scaffold responsiveWidth="1000px">
		<core-header-panel navigation flex mode="seamed">
			<div class="logo">
				POJO Viz
				<div class="subtitle middle">
					Plain Old JavaScript Object Visualization
				</div>
			</div>
			<!-- <div class="" flex> -->
				<!-- Application -->
			<!-- </div> -->
			<core-menu theme="core-light-theme"
				valueattr="label"
				selected="Known Schemas">
				
				<core-submenu
					icon="exit-to-app"
					label="Known Schemas"
					>
					<core-item data-value="render:builtIn" label="built-in objects">
						<a href="#" target="_self"></a>
					</core-item>

					<core-item data-value="render:d3" label="D3">
						<a href="#" target="_self"></a>
					</core-item>

					<core-item data-value="render:angular" label="Angular JS">
						<a href="#" target="_self"></a>
					</core-item>
				
					<core-item data-value="render:win" label="window">
						<a href="#" target="_self"></a>
					</core-item>

					<core-item data-value="render:user" label="user">
						<a href="#" target="_self"></a>
					</core-item>
				</core-submenu>
				
				<core-item data-value="settings" icon="settings" label="Settings">
					<a href="#settings" target="_self"></a>
				</core-item>
			</core-menu>

		</core-header-panel>

		<div tool horizontal layout center style="width: 100%">
			<div class="title"></div>
			<div flex></div>
			<pojoviz-about></pojoviz-about>
		</div>
		
		<core-animated-pages
			transitions="cross-fade"
			valueattr="label">

			<section label="app" class="no-padding">
				<div class="canvas-wrapper" cross-fade>
					<svg class="canvas unselectable"></svg>
				</div>
			</section>
			
			<section label="settings">
				<div class="wrapper" cross-fade>
			    	<pojoviz-settings></pojoviz-settings>
		    	</div>
		    </section>
		</core-animated-pages>
	</core-scaffold>

	<script>
		(function () {
			var schemas = document.querySelector('core-header-panel core-menu');
			var pages = document.querySelector('core-animated-pages');
			var scaffold = document.querySelector('core-scaffold');
			var tool = document.querySelector('[tool] .title');

			schemas.addEventListener('core-select', function (e) {
				var detail = e.detail,
					value,
					action;
				if (detail.isSelected) {
					// doesn't have a submenu
					if (!detail.item.$.submenu) {
						value = detail.item.dataset.value.split(':');
						action = value[0];
						if (action === 'render') {
							require(['../pojoviz'], function (pojoviz) {
								pojoviz.setSelectedHash(value[1]);
								pojoviz.render();
							});
							pages.selected = 'app';
						} else {
							pages.selected = 'settings';
						}
						// change title
						tool.textContent = detail.item.label;

						scaffold.closeDrawer();
					}
				}
			});
		})();
	</script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-52923805-1', 'auto');
	  ga('send', 'pageview');
	</script>
	<!-- <script>document.write('<script src="http://' + (location.host || 'localhost').split(':')[0] + ':35729/livereload.js?snipver=1"></' + 'script>'); -->
</script>
</body>
</html>