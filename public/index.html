<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Pojo Viz</title>

    <script src="bower_components/webcomponentsjs/webcomponents.js"></script>

  <!-- Meta -->
  <meta content="PojoViz" property="og:title">
  <meta content="PojoViz - visualize your code" name="description">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
	<link rel="icon" href="favicon.ico" type="image/x-icon">

	<link rel="import" href="bower_components/core-scaffold/core-scaffold.html">
	<link rel="import" href="bower_components/core-toolbar/core-toolbar.html">
	<link rel="import" href="bower_components/core-menu/core-menu.html">
	<link rel="import" href="bower_components/core-menu/core-submenu.html">
	<link rel="import" href="bower_components/core-item/core-item.html">
	<link rel="import" href="bower_components/core-animated-pages/core-animated-pages.html">
	<link rel="import" href="bower_components/core-animated-pages/transitions/cross-fade.html">
	<link rel="import" href="bower_components/core-tooltip/core-tooltip.html">
	<link rel="import" href="bower_components/core-icon/core-icon.html">
	<link rel="import" href="bower_components/paper-toast/paper-toast.html">

	<link rel="import" href="elements/settings.html">
	<link rel="import" href="elements/about.html">
	<link rel="import" href="elements/search.html">
	<link rel="import" href="elements/userMenu.html">
	<link rel="import" href="elements/readme.html">

	<!-- normalize -->
	<link rel="stylesheet" href="css/normalize.min.css">
	<link rel="stylesheet" href="css/app.css">

	<!-- renderer libraries -->
	<script src="lib/d3.js"></script>
	<script src="lib/tween.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.min.js"></script>
	<!-- bundle: three + t3 + marked + highlight -->
	<!-- build:js lib/vendor.js -->
	<script type="text/javascript" src="bower_components/t3/examples/lib/three.js"></script>
	<script type="text/javascript" src="bower_components/t3/dist/t3.js"></script>
	<script type="text/javascript" src="bower_components/marked/lib/marked.js"></script>
	<script type="text/javascript" src="bower_components/highlightjs/highlight.pack.js"></script>
	<!-- endbuild -->

</head>
<body unresolved fullbleed>
	<core-scaffold responsiveWidth="1000px">
		<core-header-panel navigation flex mode="seamed">
			<div class="logo">
				PojoViz
				<div class="subtitle middle">
					Plain Old JavaScript Object Visualization
				</div>
			</div>
			<!-- <div class="" flex> -->
				<!-- Application -->
			<!-- </div> -->
			<core-menu
				id="schemas"
				theme="core-light-theme"
				valueattr="label"
				selected="Known Schemas">

				<core-submenu
					icon="exit-to-app"
					label="Known Schemas"
					>

					<core-item label="Objects"
						data-options='{
							"displayName": "object"
						}'
						data-type="render:object">
					</core-item>

					<core-item label="built-in objects"
						data-options='{
							"displayName": "builtIn"
						}'
						data-type="render:builtIn">
					</core-item>

				</core-submenu>

				<core-submenu
					icon="star"
					label="Notable Libraries"
					>

					<core-item label="jQuery"
						data-options='{
							"src": "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js",
							"entryPoint": "jQuery"
						}'
						data-type="render:jQuery">
					</core-item>

					<core-item label="Polymer"
						data-options='{
							"displayName": "Polymer",
							"entryPoint": "Polymer"
						}'
						data-type="render:Polymer">
					</core-item>

					<core-item label="D3"
						data-options='{
							"displayName": "d3",
							"entryPoint": "d3"
						}'
						data-type="render:d3">
					</core-item>

					<core-item label="Lo-Dash"
						data-options='{
						    "src": "//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js",
						    "entryPoint": "_",
						    "displayName": "lodash"
						}'
						data-type="render:lodash">
					</core-item>

					<core-item label="React"
                        data-options='{
                            "src": "//fb.me/react-0.12.2.js",
                            "entryPoint": "React"
						}'
						data-type="render:react">
					</core-item>

					<core-item label="Angular JS"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/angular.js/1.2.20/angular.js",
                            "entryPoint": "angular"
						}'
						data-type="render:angular">
					</core-item>

					<core-item label="Modernizr"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js",
                            "entryPoint": "Modernizr"
						}'
						data-type="render:modernizr">
					</core-item>

					<core-item label="Handlebars"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.1.2/handlebars.js",
                            "entryPoint": "Handlebars"
						}'
						data-type="render:handlebars">
					</core-item>

					<core-item label="EmberJS"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js|//cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.1.2/handlebars.js|//cdnjs.cloudflare.com/ajax/libs/ember.js/1.6.1/ember.js",
                            "entryPoint": "Ember",
                            "forbiddenTokens": "global:$|global:Handlebars|pojoviz:builtIn|global:window|global:document"
						}'
						data-type="render:ember">
					</core-item>

					<core-item label="Backbone"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js|//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone.js",
                            "entryPoint": "Backbone"
						}'
						data-type="render:backbone">
					</core-item>

					<core-item label="Marionette.js"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js|//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.js|//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone.js|http://marionettejs.com/downloads/backbone.marionette.js",
                            "entryPoint": "Marionette"
						}'
						data-type="render:marionette.js">
					</core-item>
				</core-submenu>

				<core-submenu
					icon="favorite"
					label="My libraries"
					>
					<core-item label="PojoViz"
                        data-options='{
                            "entryPoint": "pojoviz",
                            "alwaysDirty": true
						}'
						data-type="render:pojoviz">
					</core-item>

					<core-item label="t3"
                        data-options='{
                            "entryPoint": "t3"
						}'
						data-type="render:t3">
					</core-item>
				</core-submenu>

				<core-submenu
					icon="warning"
					label="Huge Schemas"
					>

					<core-item label="window"
                        data-options='{
                            "entryPoint": "window"
						}'
						data-type="render:window">
						<core-tooltip label="huge data is coming" position="right">
							<core-icon icon="warning" size="10"></core-icon>
						</core-tooltip>
					</core-item>

					<core-item label="ExtJS Core"
                        data-options='{
                            "src": "//cdn.sencha.com/ext/gpl/4.2.1/ext-all.js",
                            "entryPoint": "Ext",
                            "analyzerConfig": {
                                "levels": 1,
                                "visitConstructors": false
                            }
						}'
						data-type="render:extjs">
						<core-tooltip label="O: too much data" position="right">
							<core-icon icon="warning" size="10"></core-icon>
						</core-tooltip>
					</core-item>

					<!-- declared in InspectedInstances -->
					<core-item label="three.js"
                        data-options='{
                            "entryPoint": "THREE"
						}'
						data-type="render:three">
					</core-item>

					<core-item label="Phaser"
                        data-options='{
                            "src": "//cdnjs.cloudflare.com/ajax/libs/phaser/2.0.6/phaser.min.js",
                            "entryPoint": "Phaser"
						}'
						data-type="render:Phaser">
					</core-item>

				</core-submenu>

			</core-menu>

			<!-- user libraries -->
			<pojoviz-user-menu></pojoviz-user-menu>

		</core-header-panel>

		<!-- title + info -->
		<div tool horizontal layout center style="width: 100%">
			<div class="title"></div>
			<div flex></div>
      <!-- GitHub buttons: see http://ghbtns.com -->
      <iframe src="http://ghbtns.com/github-btn.html?user=maurizzzio&amp;repo=PojoViz&amp;type=watch&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="110" height="20"></iframe>

			<pojoviz-search></pojoviz-search>
			<pojoviz-about></pojoviz-about>
			<core-icon-button
				data-type="settings"
				class="toolbar-page"
				icon="settings">
			</core-icon-button>
			<core-icon-button
				id="readme"
				data-type="readme"
				class="toolbar-page"
				icon="description">
			</core-icon-button>
		</div>

		<core-animated-pages
			transitions="cross-fade"
			valueattr="label">

			<section label="app" class="no-padding">
				<div class="canvas-wrapper" cross-fade>
                    <!--three js renderer canvas-->
					<div id="threejscanvas" style="display: none; height: 100%"></div>
                    <!--d3 renderer canvas-->
					<svg id="canvas" class="unselectable" style="display: none;"></svg>
				</div>
			</section>
			<section label="settings">
				<div class="wrapper" cross-fade>
					<pojoviz-settings></pojoviz-settings>
				</div>
			</section>
			<section label="readme">
				<div class="wrapper" cross-fade>
					<pojoviz-readme></pojoviz-readme>
				</div>
			</section>
		</core-animated-pages>
	</core-scaffold>

	<paper-toast id="toast" text=""></paper-toast>

	<!-- app -->
	<script src="../build/pojoviz-vendor.js"></script>
	<script src="../build/pojoviz.js"></script>
	<script src="../build/pojoviz-renderers.js"></script>

	<script>
		// support onpushstate
		(function (history) {
			var pushState = history.pushState;
			history.pushState = function(state) {
				if (typeof history.onpushstate === "function") {
					history.onpushstate({state: state});
				}
				return pushState.apply(history, arguments);
			};
		})(window.history);

		(function () {
			var schemas = document.querySelector('core-header-panel #schemas');
			var pages = document.querySelector('core-animated-pages');
			var scaffold = document.querySelector('core-scaffold');
			var tool = document.querySelector('[tool] .title');

			function runLibrary(options) {
				// global name, data properties
				pojoviz
                    .setCurrentInspector(options)
					.then(function() {
						pojoviz.render();
					})
					.fail(function (e) {
						pojoviz.utils.notification(e);
						throw e;
					})
					.done();
				// pojoviz.render();
				pages.selected = 'app';
				// change title
//				tool.textContent = value[1];
				scaffold.closeDrawer();
			}

			function changeHistory(el) {
				window.history.pushState(
					JSON.parse(JSON.stringify(el.dataset)),
					el.dataset.type,
					'#' + el.dataset.type
				);
			}

			schemas.addEventListener('core-select', function (e) {
				var detail = e.detail;
				if (detail.isSelected &&
					!detail.item.$.submenu) {
					changeHistory(detail.item);
				}
			});

			document.addEventListener('library-select', function (e) {
				// runLibrary(e.detail);
				changeHistory(e.detail);
			});

			window.onpopstate = history.onpushstate = function(e) {
				var type = e.state.type;
				if (~type.indexOf('render')) {
					runLibrary(JSON.parse(e.state.options));
					return;
				}
                pages.selected = type;
				tool.textContent = '';
			};

			window.pushState = function (hash) {
				// on page load find an el with a data-type equal to the hash part
				var el = document.querySelector('[data-type="' +
					hash + '"]');

                // default to readme if it doesn't exist
				if (!el) {
					el = scaffold.querySelector('#readme');
				}
				changeHistory(el);
			};

			// settings + readme
			[].slice.call(scaffold
				.querySelectorAll('core-scaffold .toolbar-page'))
				.forEach(function (v) {
					v.addEventListener('click', function (event) {
						changeHistory(event.target);
					});
				});

			// toast
			var toast = document.getElementById('toast');
			document
				.addEventListener('pojoviz-notification', function (e) {
					toast.text = e.detail;
					toast.show();
				});

			window.addEventListener('polymer-ready', function () {
				var el,
					hash = (history.state && history.state.type) ||
						location.hash.substr(1);

				window.pushState(hash);

				// query params
				var params = {};
				location.search.substring(1).split('&')
					.forEach(function (v) {
						var sp = v.split('=');
						params[sp[0]] = sp[1];
					});

				// hide some elements
				if (params.toolbar === 'false') {
					document.documentElement.className += ' notoolbar';
				}
			});
		})();
	</script>

	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-52923805-1', 'auto');
	  ga('send', 'pageview');
	</script>
</script>
</body>
</html>