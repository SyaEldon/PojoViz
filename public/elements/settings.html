<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">
<polymer-element name="pojoviz-settings">
	<template>
		<style>
			paper-checkbox {
				padding: 20px 40px 20px 0;
			}
			paper-slider {
				width: 100%;
				max-width: 1000px;
			}
			.depth-value {
				padding-left: 20px;
				color: #bbb;
			}
			.service-name {
				padding-right: 50px;
			}
		</style>		

		<section>
			<h3>Angular drawer settings</h3>
			<p>
				Select ng module services to be drawn
			</p>
			<div layout wrap horizontal>
				<template repeat="{{ service in angularServices }}">
					<div class="angular-service" horizontal center layout style="width: 300px">
						<div flex class="service-name"> {{ service.name }} </div>
						<paper-checkbox checked="{{service.checked}}"></paper-checkbox>
					</div>
				</template>
			</div>
		</section>
		
		<section>
			<h3>
				Window max depth
				<span class="depth-value">{{$.depth.value}}</span>
			</h3>
			<p>
				Defines the maximum depth when running the dfs algorithm starting from the <i>window</i> object <br />
				WARNING: The higher the value the longer the time needed for the browser to render the nodes
			</p>
			<paper-slider on-change="{{windowDepthChange}}" id="depth" pin snaps max="10" step="1" value="1">
			</paper-slider>
		</section>

		<content></content>

	</template>
	<script>
		Polymer('pojoviz-settings', {
			ready: function () {
				var me = this,
					angularAnalyzer = pojoviz.ObjectHashes.angular;
				me.angularServices = angularAnalyzer.services;
			},

			windowDepthChange: function (event, detail, el) {
				var objectHashes = pojoviz.ObjectHashes;
				objectHashes.window.levels = el.value;
			},

			// deprecated
			hideBuiltIn: function (event, detail, el) {
				var oa = pojoviz.ObjectAnalyzer,
					builtIn = oa.getBuiltInObjects();
				if (el.checked) {
					oa.forbid(builtIn, true);
				} else {
					oa.unforbid(builtIn, true);
					oa.add(builtIn);
				}
			},
			// deprecated
			showWindow: function (event, detail, el) {
				var oa = pojoviz.ObjectAnalyzer;
				if (el.checked) {
					oa.levels(5);
					oa.add([window], true);
				} else {
					oa.remove([window]);
				}
			}
		});
	</script>
</polymer-element>