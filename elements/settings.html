<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-slider/paper-slider.html">
<polymer-element name="pojoviz-settings">
	<template>
		<style>
			paper-checkbox {
				padding: 20px 40px 20px 0;
			}
			paper-slider {
				width: 100%;
				max-width: 1000px;
			}
			.depth-value {
				padding-left: 20px;
				color: #bbb;
			}
		</style>
		
		<h3>Drawer Settings</h3>
		<div horizontal layout>
			<paper-checkbox id="hide-builtin" on-change="{{hideBuiltIn}}"></paper-checkbox>
			<div vertical layout>
				<h4>Hide built-in objects</h4>
				<p>Hide all the builtIn objects/functions including its prototypes like Object, Object.prototype, Function, Function.prototype</p>
			</div>
		</div>
		
		<div horizontal layout>
			<paper-checkbox on-change="{{showWindow}}"></paper-checkbox>
			<div vertical layout>
				<h4>Include the <i>window</i> object</h4>
				<p>
					Include the whole tree starting in the <i>window</i> object <br>
					WARNING: the tree is HUGE so you have to be patient
				</p>
			</div>
		</div>

		<section>
			<div>
				<h4>
					Window max depth
					<span class="depth-value">{{$.depth.value}}</span>
				</h4>
				<p>
					Defines the maximum depth when running the dfs algorithm starting from the <i>window</i> object <br />
					WARNING: The higher the value the longer the time needed for the browser to render the nodes
				</p>
			</div>
			<paper-slider on-change="{{windowDepthChange}}" id="depth" pin snaps max="10" step="1" value="3">
			</paper-slider>
		</section>

		<content></content>

	</template>
	<script>
		Polymer('pojoviz-settings', {
			windowDepthChange: function (event, detail, el) {
				require(['ObjectHashes'], function (objectHashes) {
					console.log(el.value);
					objectHashes.win.levels(el.value);
				});
			},
			hideBuiltIn: function (event, detail, el) {
				var oa = pojoviz.ObjectAnalyzer,
					builtIn = oa.getBuiltInObjects();
				if (el.checked) {
					oa.forbid(builtIn, true);
				} else {
					oa.unforbid(builtIn, true);
					oa.add(builtIn);
				}
			},

			showWindow: function (event, detail, el) {
				var oa = pojoviz.ObjectAnalyzer;
				if (el.checked) {
					oa.levels(5);
					oa.add([window], true);
				} else {
					oa.remove([window]);
				}
			}
		});
	</script>
</polymer-element>